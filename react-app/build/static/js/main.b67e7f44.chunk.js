(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,function(e,t,a){e.exports={form:"Forms_form__2Z1zy",button:"Forms_button__1cTfC"}},,function(e,t,a){e.exports={backdrop:"Modal_backdrop__3iXHD",modal:"Modal_modal__30MRu","slide-down":"Modal_slide-down__294fH"}},function(e,t,a){e.exports={grid:"Gallery_grid__wKUBe",column:"Gallery_column__1afft"}},,,function(e,t,a){e.exports={navigation:"Navigation_navigation__3zdNe"}},function(e,t,a){e.exports=a(21)},,,,,function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(5),r=a.n(c),l=(a(16),a(17),a(18),a(1)),i=a(10),u=a.n(i),s=function(e){var t=e.collectionName?e.collectionName:"";return o.a.createElement("div",{className:u.a.navigation},o.a.createElement("h1",null,"img"),o.a.createElement("ul",null,o.a.createElement("li",{onClick:function(){e.displayAllImages(),e.updateFaves()}},"All Memes"),o.a.createElement("li",{onClick:e.showCreateModal},"Start a Collection"),o.a.createElement("li",{onClick:e.showChooseModal},"Choose a Collection"),o.a.createElement("li",{onClick:function(){e.loadFaveCollection(t)}},"Fave Memes")))},m=a(2),f=a.n(m),d=a(3),p="https://meme-server2.herokuapp.com/img",v={addCollection:function(){var e=Object(d.a)(f.a.mark((function e(t){var a,n,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t,account:Math.floor(1e5+9e5*Math.random())})},e.next=3,fetch(p+"/addCollection",a);case 3:return n=e.sent,e.next=6,n.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCollection:function(){var e=Object(d.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p+"/favorites/"+t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h="https://meme-server2.herokuapp.com/img",b={getAllImages:function(){var e=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h,{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getFaveCollections:function(){var e=Object(d.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/favoriteCollectionsList",{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addToFaveImages:function(){var e=Object(d.a)(f.a.mark((function e(t,a,n,o){var c,r,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t,_id:a,url:n,account:o,alt:""})},e.next=3,fetch(h+"/addToFavoritesCollection",c);case 3:return r=e.sent,e.next=6,r.json();case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n,o){return e.apply(this,arguments)}}(),removeFromFaveImages:function(){var e=Object(d.a)(f.a.mark((function e(t,a){var n,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t,_id:a})},e.next=3,fetch(h+"/removeFromFavoritesCollection/"+t+"/"+a,n);case 3:return o=e.sent,e.next=6,o.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},g=a(8),C=a(7),E=a.n(C),j=function(e){return o.a.createElement("div",null,o.a.createElement("img",{src:e.source.url,alt:e.source.alt}))},O=(a(20),function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){if(e.faveImageData.images){var t=-1!==e.faveImageData.images.map((function(e){return e._id})).indexOf(e.source._id);r(t)}}),[e.faveImageData,e.source._id]),e.collectionName&&e.showColumn?o.a.createElement(o.a.Fragment,null,o.a.createElement(j,{source:e.source}),o.a.createElement("span",{className:!0===c?"fas fa-heart":"far fa-heart",onClick:function(t){r(!c),!0!==c?(b.addToFaveImages(e.collectionName,e.source._id,e.source.url,e.source.account),e.showColumn?t.stopPropagation():e.updateFaves()):(b.removeFromFaveImages(e.collectionName,e.source._id),e.showColumn?t.stopPropagation():e.updateFaves())}})):o.a.createElement(j,{source:e.source})}),F=function(e){var t=e.isFaveCollection?e.faveImageData.images:e.allImageData,a=Object(n.useState)(),c=Object(l.a)(a,2),r=c[0],i=c[1],u=Object(n.useState)(!1),s=Object(l.a)(u,2),m=s[0],f=s[1];return Object(n.useEffect)((function(){r&&"function"===typeof r.scrollIntoView&&r.scrollIntoView({behavior:"smooth",block:"start"})}),[r]),e.isLoaded?""===e.collectionName||e.isFaveCollection&&e.collectionName&&0===e.faveImageData.images.length?o.a.createElement("div",null,e.collectionName&&o.a.createElement("h2",null,"Collection: ",e.collectionName),o.a.createElement("p",null,"No favorite images. Make selections to see them here.")):o.a.createElement("div",{className:m?E.a.column:E.a.grid},e.collectionName&&o.a.createElement("h2",null,"Collection: ",e.collectionName),o.a.createElement("ul",null,t.map((function(t,a){var n=o.a.createRef();return o.a.createElement("li",{id:a,key:a,ref:n,onClick:function(){f(m=!m),e.collectionName&&!1===m&&e.updateFaves(),i(n.current)}},o.a.createElement(O,{source:Object(g.a)(Object(g.a)({},t),{},{account:e.faveImageData.account}),faveImageData:e.faveImageData,collectionName:e.collectionName,updateFaves:e.updateFaves,showColumn:m}))})))):o.a.createElement("div",null,o.a.createElement("p",null,"Loading... ",e.isLoaded))},w=a(6),y=a.n(w),N=function(e){return o.a.createElement("div",{className:y.a.backdrop,onClick:e.onClose})},_=function(e){return o.a.createElement("div",{className:y.a.modal},o.a.createElement("div",{className:y.a.content},e.children))},S=function(e){var t=document.getElementById("overlays");return o.a.createElement(o.a.Fragment,null,r.a.createPortal(o.a.createElement(N,{onClose:e.onClose}),t),r.a.createPortal(o.a.createElement(_,null,e.children),t))},k=a(4),x=a.n(k),I=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(""),u=Object(l.a)(i,2),s=u[0],m=u[1];return Object(n.useEffect)((function(){try{s&&(e.loadFaveCollection(c),e.updateFaveCollectionsList())}catch(t){console.log(t)}}),[s,c,e]),o.a.createElement(S,{onClose:e.onClose},o.a.createElement("div",{className:x.a.form},o.a.createElement("h3",null,"Create a new favorites folder"),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v.addCollection(c).then((function(e){m(Boolean(e))}))}},o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"name"},"Add a name:\xa0"),o.a.createElement("input",{type:"text",id:"name",onChange:function(e){"name"===e.target.name&&r(e.target.value)}})),o.a.createElement("button",{className:x.a.button,type:"submit"},"Submit"))))},D=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],r=a[1];return o.a.createElement(S,{onClose:e.onClose},o.a.createElement("div",{className:x.a.form},o.a.createElement("h3",null,"Choose a favorites collection"),o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),""!==c&&"Select a folder"!==c&&(e.loadFaveCollection(c),e.onClose())}},o.a.createElement("label",{htmlFor:"collection"},"Select a collection below:\xa0"),o.a.createElement("select",{id:"collection",onChange:function(e){"Select a folder"!==e.target.name&&r(e.target.value)}},e.faveImageCollections.map((function(e,t){return o.a.createElement("option",{key:t,value:e.name},e.name)}))),o.a.createElement("button",{className:x.a.button,type:"submit"},"Submit"))))},M=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)({images:[],account:null}),i=Object(l.a)(r,2),u=i[0],m=i[1],f=Object(n.useState)(!1),d=Object(l.a)(f,2),p=d[0],h=d[1],g=Object(n.useState)([]),C=Object(l.a)(g,2),E=C[0],j=C[1],O=Object(n.useState)([]),w=Object(l.a)(O,2),y=w[0],N=w[1],_=Object(n.useState)(!1),S=Object(l.a)(_,2),k=S[0],x=S[1],M=Object(n.useState)(!1),A=Object(l.a)(M,2),L=A[0],T=A[1],P=Object(n.useState)(!1),B=Object(l.a)(P,2),J=B[0],z=B[1],G=function(){R(a)},H=function(e){c(e),z(!0),e.trim().length>0&&R(e)},R=function(e){v.getCollection(e).then((function(e){e[0]&&m({images:e[0].images,account:e[0].account})}))},V=function(){b.getFaveCollections().then((function(e){return j(e)}),h(!0))};return Object(n.useEffect)((function(){b.getAllImages().then((function(e){N(e)})),V()}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(s,{collectionName:a,loadFaveCollection:H,updateFaves:G,updateFaveCollectionsList:V,showCreateModal:function(){x(!0)},showChooseModal:function(){T(!0)},displayAllImages:function(){""===a&&c(null),z(!1)}}),o.a.createElement(F,{allImageData:y,faveImageData:u,isLoaded:p,isFaveCollection:J,collectionName:a,updateFaves:G}),k&&o.a.createElement(I,{onClose:function(){x(!1)},loadFaveCollection:H,updateFaveCollectionsList:V}),L&&o.a.createElement(D,{onClose:function(){T(!1)},faveImageCollections:E,loadFaveCollection:H,updateFaveCollectionsList:V}))};var A=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.b67e7f44.chunk.js.map